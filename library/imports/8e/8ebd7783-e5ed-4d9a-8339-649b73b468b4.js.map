{"version":3,"sources":["../../../assets/assets/hall.js"],"names":["cc","Class","extends","Component","properties","onLoad","oft","loader","loadResDir","completedCount","totalCount","item","err","consts","console","log","datas","getfiles","name","mmm","_storagePath","jsb","fileUtils","getWritablePath","UIRLFILE","filees","manifestUrl","customManifestStr","JSON","stringify","versionCompareHandle","versionA","versionB","vA","split","vB","i","length","a","parseInt","b","_am","AssetsManager","sys","ENABLE_GC_FOR_NATIVE_OBJECTS","retain","setVerifyCallback","path","asset","compressed","expectedMD5","md5","relativePath","size","os","OS_ANDROID","setMaxConcurrentTask","_updateListener","EventListenerAssetsManager","updateCb","bind","checkCb","eventManager","addListener","getState","State","UNINITED","isFileExist","loadLocalManifest","manifest","Manifest","_shengji","update","checkUpdate","event","needRestart","getEventCode","EventAssetsManager","ERROR_NO_LOCAL_MANIFEST","ERROR_DOWNLOAD_MANIFEST","ERROR_PARSE_MANIFEST","NEW_VERSION_FOUND","ALREADY_UP_TO_DATE","UPDATE_PROGRESSION","find","getComponent","Label","string","getPercentByFile","getDownloadedFiles","getTotalFiles","msg","getMessage","ASSET_UPDATED","ERROR_UPDATING","UPDATE_FINISHED","UPDATE_FAILED","downloadFailedAssets","ERROR_DECOMPRESS","searchPaths","getSearchPaths","newPaths","getLocalManifest","Array","prototype","unshift","apply","localStorage","setItem","setSearchPaths","audioEngine","stopAll","game","restart","updateName","download_sub_game","download_hall","enter_sub_game","window","require","on_create_game","loadRes","Prefab","res","onDestroy"],"mappings":"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","file":"hall.js","sourceRoot":"../../../assets","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        cc.oft = {};\n        cc.loader.loadResDir(\n            \"data\",\n            (completedCount, totalCount, item) => {},\n            (err, consts) => {\n                console.log(consts)\n                cc.oft.datas = consts;\n            },\n        );\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n\n    //*************************子游戏demo 开始***************************//\n    getfiles: function (name, mmm) {\n\n\n        this._storagePath = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + 'ALLGame/' + name);\n        console.log('_storagePath:', this._storagePath);\n        var UIRLFILE = \"http://192.168.1.166:8080/down/remote-assets/\" + name;\n        var filees = this._storagePath + \"/peision.manifest\";\n        this.manifestUrl = filees;\n\n        var customManifestStr = JSON.stringify({\n\n            \"packageUrl\": UIRLFILE,\n            \"remoteManifestUrl\": UIRLFILE + \"/peision.manifest\",\n            \"remoteVersionUrl\": UIRLFILE + \"/version.manifest\",\n            \"version\": \"0.0.1\",\n            \"assets\": {},\n            \"searchPaths\": []\n        });\n\n        var versionCompareHandle = function (versionA, versionB) {\n            var vA = versionA.split('.');\n            var vB = versionB.split('.');\n            for (var i = 0; i < vA.length; ++i) {\n                var a = parseInt(vA[i]);\n                var b = parseInt(vB[i] || 0);\n                if (a === b) {\n                    continue;\n                } else {\n                    return a - b;\n                }\n            }\n            if (vB.length > vA.length) {\n                return -1;\n            } else {\n                return 0;\n            }\n        };\n\n\n\n\n        this._am = new jsb.AssetsManager('', this._storagePath, versionCompareHandle);\n\n        if (!cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS) {\n            this._am.retain();\n        }\n\n\n\n\n\n        this._am.setVerifyCallback(function (path, asset) {\n\n            var compressed = asset.compressed;\n\n            var expectedMD5 = asset.md5;\n\n            var relativePath = asset.path;\n\n            var size = asset.size;\n\n\n\n            if (compressed) {\n\n                return true;\n            } else {\n\n                return true;\n            }\n        });\n\n\n        if (cc.sys.os === cc.sys.OS_ANDROID) {\n\n            this._am.setMaxConcurrentTask(2);\n        }\n\n        if (mmm == 1) {\n\n            this._updateListener = new jsb.EventListenerAssetsManager(this._am, this.updateCb.bind(this));\n\n        } else {\n\n            this._updateListener = new jsb.EventListenerAssetsManager(this._am, this.checkCb.bind(this));\n\n        }\n\n\n        cc.eventManager.addListener(this._updateListener, 1);\n\n\n        if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {\n\n\n            if (jsb.fileUtils.isFileExist(filees)) {\n\n                this._am.loadLocalManifest(this.manifestUrl);\n\n            } else {\n\n                var manifest = new jsb.Manifest(customManifestStr, this._storagePath);\n                this._am.loadLocalManifest(manifest, this._storagePath);\n            }\n\n        }\n\n\n        if (mmm == 1) {\n\n            this._shengji = true;\n            this._am.update();\n\n        } else {\n\n            this._am.checkUpdate();\n            this._shengji = false;\n        }\n\n        console.log(\"更新文件:\" + filees);\n\n    },\n\n    updateCb: function (event) {\n\n        var needRestart = false;\n\n        //console.log( \"升级执行:\"+event.getEventCode()  );\n\n        switch (event.getEventCode()) {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n\n                /*0 本地没有配置文件*/\n                console.log('本地没有配置文件');\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n                /*1下载配置文件错误*/\n\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                /*2 解析文件错误*/\n\n                break;\n\n            case jsb.EventAssetsManager.NEW_VERSION_FOUND:\n                /*3发现新的更新*/\n\n\n\n\n                break;\n\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                /*4 已经是最新的*/\n\n                break;\n\n            case jsb.EventAssetsManager.UPDATE_PROGRESSION:\n                /*5 最新进展  做 进度的*/\n\n\n                cc.find(\"Canvas/label\").getComponent(cc.Label).string = event.getPercentByFile();\n                console.log(event.getDownloadedFiles() + ' / ' + event.getTotalFiles());\n                var msg = event.getMessage();\n                if (msg) {\n                    console.log('Updated file: ' + msg);\n                }\n\n\n\n                break;\n\n\n            case jsb.EventAssetsManager.ASSET_UPDATED:\n                /*6需要更新*/\n\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_UPDATING:\n\n                /*7更新错误*/\n\n                break;\n\n\n            case jsb.EventAssetsManager.UPDATE_FINISHED:\n                /*8更新完成*/\n                cc.find(\"Canvas/label\").getComponent(cc.Label).string = \"更新完成\";\n                console.log('更新完成');\n                needRestart = true;\n                break;\n\n            case jsb.EventAssetsManager.UPDATE_FAILED:\n                /*9更新失败*/\n                this._am.downloadFailedAssets();\n\n                this.getfiles(\"subgame\", 1);\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_DECOMPRESS:\n                /*10解压失败*/\n\n                break;\n\n        }\n\n        if (needRestart) {\n            this._updateListener = null;\n            // Prepend the manifest's search path\n            var searchPaths = jsb.fileUtils.getSearchPaths();\n            var newPaths = this._am.getLocalManifest().getSearchPaths();\n            console.log(JSON.stringify(newPaths));\n            Array.prototype.unshift.apply(searchPaths, newPaths);\n            // This value will be retrieved and appended to the default search path during game startup,\n            // please refer to samples/js-tests/main.js for detailed usage.\n            // !!! Re-add the search paths in main.js is very important, otherwise, new scripts won't take effect.\n            cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));\n            jsb.fileUtils.setSearchPaths(searchPaths);\n            cc.audioEngine.stopAll();\n            cc.game.restart();\n        }\n\n\n\n    },\n\n\n\n    checkCb: function (event) {\n\n\n\n        console.log(\"检测执行:\" + event.getEventCode());\n\n        switch (event.getEventCode()) {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n\n                /*0 本地没有配置文件*/\n\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n                /*1下载配置文件错误*/\n\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                /*2 解析文件错误*/\n\n                break;\n\n            case jsb.EventAssetsManager.NEW_VERSION_FOUND:\n                /*3发现新的更新*/\n\n                this.getfiles(this.updateName, 1);\n\n\n\n                break;\n\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                /*4 已经是最新的*/\n                cc.find(\"Canvas/label\").getComponent(cc.Label).string = \"已经是最新的了！\";\n                break;\n\n            case jsb.EventAssetsManager.UPDATE_PROGRESSION:\n                /*5 最新进展  做 进度的*/\n\n\n\n\n                break;\n\n\n            case jsb.EventAssetsManager.ASSET_UPDATED:\n\n                /*6需要更新*/\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_UPDATING:\n\n                /*7更新错误*/\n\n                break;\n\n\n            case jsb.EventAssetsManager.UPDATE_FINISHED:\n                /*8更新完成*/\n\n\n                break;\n            case jsb.EventAssetsManager.UPDATE_FAILED:\n                /*9更新失败*/\n\n\n                break;\n\n            case jsb.EventAssetsManager.ERROR_DECOMPRESS:\n                /*10解压失败*/\n\n                break;\n\n        }\n\n\n\n    },\n\n    updateName: '',\n\n    download_sub_game: function () {\n        this.updateName = 'subgame'\n        this.getfiles(\"subgame\", 2);\n    },\n\n    download_hall: function () {\n        this.updateName = 'hall'\n        this.getfiles(\"hall\", 2);\n    },\n\n    enter_sub_game: function () {\n        if (!this._storagePath) {\n            cc.find(\"Canvas/label\").getComponent(cc.Label).string = \"请先点击下载游戏，检查版本是否更新！！！\";\n            return;\n        }\n\n        window.require(this._storagePath + \"/src/main.js\");\n    },\n\n    on_create_game: function () {\n        cc.loader.loadRes('prefab/game1', cc.Prefab, (err, res) => {\n            console.log('game: =>', res);\n        });\n    },\n\n    //*************************子游戏demo 结束***************************//\n\n    onDestroy: function () {\n        console.log('hall => destroy');\n    }\n});"]}